# å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

å‰ç«¯å·²æ”¯æŒ**å¤šå›¾ç‰‡ç²˜è´´**åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ï¼š
- å¤åˆ¶å›¾ç‰‡åç›´æ¥ç²˜è´´åˆ°è¾“å…¥æ¡†
- æŸ¥çœ‹å›¾ç‰‡ç¼©ç•¥å›¾é¢„è§ˆ
- åŒæ—¶å‘é€å¤šå¼ å›¾ç‰‡ç»™AIåˆ†æ
- è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„Visionæ¨¡å‹

## ğŸ¨ UIè®¾è®¡

### 1. å›¾ç‰‡ç¼©ç•¥å›¾æ˜¾ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å›¾ç‰‡1] [å›¾ç‰‡2] [å›¾ç‰‡3]              â”‚  â† ç¼©ç•¥å›¾åŒºåŸŸ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥æ¡†...                           â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹ç‚¹**ï¼š
- 80x80åƒç´ ç¼©ç•¥å›¾
- åœ†è§’è¾¹æ¡†
- æ‚¬åœæ”¾å¤§æ•ˆæœ
- ç‚¹å‡»Ã—å¯åˆ é™¤

### 2. æ¶ˆæ¯ä¸­æ˜¾ç¤ºå›¾ç‰‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ ç”¨æˆ·                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ å›¾1 â”‚ â”‚ å›¾2 â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚  è¯·åˆ†æè¿™äº›å›¾ç‰‡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### ç”¨æˆ·æ“ä½œ

1. **å¤åˆ¶å›¾ç‰‡**ï¼ˆä»æµè§ˆå™¨ã€å¾®ä¿¡ã€æˆªå›¾å·¥å…·ç­‰ï¼‰
2. **ç‚¹å‡»è¾“å…¥æ¡†**
3. **Ctrl+V æˆ– Cmd+V ç²˜è´´**
4. **å›¾ç‰‡è‡ªåŠ¨æ˜¾ç¤ºç¼©ç•¥å›¾**
5. **ç‚¹å‡»å‘é€æŒ‰é’®**

### å‰ç«¯ä»£ç 

```javascript
// InputArea.vue
const handlePaste = async (event) => {
  const items = event.clipboardData.items
  for (let i = 0; i < items.length; i++) {
    const item = items[i]
    if (item.type.indexOf('image') !== -1) {
      event.preventDefault()
      const blob = item.getAsFile()
      const reader = new FileReader()
      reader.onload = (e) => {
        const base64 = e.target.result
        images.value.push(base64)
        emit('images-update', images.value)
      }
      reader.readAsDataURL(blob)
    }
  }
}
```

## ğŸ“¡ APIè°ƒç”¨

### åç«¯æ¥æ”¶

```java
@GetMapping("/simple/streamChat")
public Flux<String> streamChat(
    @RequestParam("query") String query,
    @RequestParam("sessionId") String sessionId,
    @RequestParam(value = "imageBase64", required = false) List<String> imageBase64List) {
  // imageBase64List: ["data:image/png;base64,iVBORw0KG...", ...]
}
```

### å‰ç«¯å‘é€

```javascript
// chat.js
const url = `/api/aiChat/simple/streamChat?query=${encodedQuery}&sessionId=${sessionId}${imageParams}`

// imageParamsæ ¼å¼ï¼š
// &imageBase64=data:image/png;base64,iVBORw0KG...
// &imageBase64=data:image/jpeg;base64,/9j/4AAQ...
```

## ğŸ¯ è‡ªåŠ¨æ¨¡å‹é€‰æ‹©

```
ç”¨æˆ·ç²˜è´´å›¾ç‰‡
  â†“
å‰ç«¯å‘é€åˆ°åç«¯ï¼ˆå¸¦imageBase64å‚æ•°ï¼‰
  â†“
ModelSelectoræ£€æµ‹åˆ°å›¾ç‰‡
  â†“
è‡ªåŠ¨é€‰æ‹©qwen-vl-plusæ¨¡å‹
  â†“
Visionæ¨¡å‹å¤„ç†å›¾ç‰‡
```

## ğŸ¨ ç»„ä»¶è¯´æ˜

### ImageThumbnail.vue
- **åŠŸèƒ½**: å›¾ç‰‡ç¼©ç•¥å›¾ç»„ä»¶
- **Props**: `imageData` (base64å­—ç¬¦ä¸²)
- **Events**: `remove` (åˆ é™¤äº‹ä»¶)

### InputArea.vue
- **æ–°å¢åŠŸèƒ½**: 
  - `@paste` äº‹ä»¶ç›‘å¬
  - `images` æ•°ç»„ç®¡ç†
  - `handlePaste` å¤„ç†ç²˜è´´
  - `removeImage` åˆ é™¤å›¾ç‰‡

### ChatMessage.vue
- **æ–°å¢åŠŸèƒ½**:
  - æ˜¾ç¤ºæ¶ˆæ¯ä¸­çš„å›¾ç‰‡
  - ç‚¹å‡»å›¾ç‰‡æ”¾å¤§é¢„è§ˆ
  - æ”¯æŒå¤šå¼ å›¾ç‰‡æ˜¾ç¤º

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **base64æ ¼å¼**: å‰ç«¯å‘é€å®Œæ•´çš„Data URL
   ```
   data:image/png;base64,iVBORw0KG...
   ```

2. **URLé•¿åº¦é™åˆ¶**: 
   - å¤šå¼ å›¾ç‰‡å¯èƒ½å¯¼è‡´URLè¿‡é•¿
   - å»ºè®®å‰ç«¯é™åˆ¶æœ€å¤§5å¼ å›¾ç‰‡
   - æˆ–è€…æ”¹ä¸ºPOSTè¯·æ±‚

3. **æµè§ˆå™¨å…¼å®¹æ€§**:
   - `clipboardData.items` éœ€è¦ç°ä»£æµè§ˆå™¨
   - iOS Safariå¯èƒ½ä¸æ”¯æŒ

4. **å›¾ç‰‡å¤§å°**:
   - å»ºè®®åœ¨å‰ç«¯å‹ç¼©å›¾ç‰‡
   - é™åˆ¶å•å¼ å›¾ç‰‡æœ€å¤§5MB

## ğŸ”® æœªæ¥ä¼˜åŒ–

- [ ] å‰ç«¯å›¾ç‰‡å‹ç¼©
- [ ] æ‹–æ‹½ä¸Šä¼ æ”¯æŒ
- [ ] å›¾ç‰‡æ ¼å¼é™åˆ¶æç¤º
- [ ] å›¾ç‰‡å¤§å°é™åˆ¶
- [ ] ä¸Šä¼ è¿›åº¦æ˜¾ç¤º







